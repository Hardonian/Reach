{
  "$schema": "https://json-schema.org/draft/2020-12/schema",
  "$id": "https://reach.sh/protocol/v1/execution-contract.schema.json",
  "title": "Execution Contract",
  "type": "object",
  "required": [
    "schemaVersion",
    "specVersion",
    "packMetadata",
    "executionMetadata",
    "federation"
  ],
  "properties": {
    "schemaVersion": {
      "type": "string",
      "const": "1.0.0"
    },
    "specVersion": {
      "type": "string",
      "pattern": "^[0-9]+\\.[0-9]+\\.[0-9]+$"
    },
    "packMetadata": {
      "type": "object",
      "required": ["id", "version", "specVersion"],
      "properties": {
        "id": { "type": "string", "minLength": 1 },
        "version": { "type": "string", "minLength": 1 },
        "specVersion": {
          "type": "string",
          "pattern": "^[0-9]+\\.[0-9]+\\.[0-9]+$"
        }
      },
      "additionalProperties": true
    },
    "executionMetadata": {
      "type": "object",
      "required": ["specVersion"],
      "properties": {
        "specVersion": {
          "type": "string",
          "pattern": "^[0-9]+\\.[0-9]+\\.[0-9]+$"
        },
        "packId": { "type": "string" },
        "packVersion": { "type": "string" },
        "packHash": { "type": "string" }
      },
      "additionalProperties": true
    },
    "federation": {
      "type": "object",
      "required": ["specVersion"],
      "properties": {
        "specVersion": {
          "type": "string",
          "pattern": "^[0-9]+\\.[0-9]+\\.[0-9]+$"
        },
        "registrySnapshotHash": { "type": "string" },
        "policyVersion": { "type": "string" }
      },
      "additionalProperties": true
    }
  },
  "additionalProperties": false
}
