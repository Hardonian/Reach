#!/usr/bin/env bash
set -euo pipefail

cmd="${1:-}"
case "$cmd" in
  doctor)
    shift
    (cd tools/doctor && go run . "$@")
    ;;
  release-check)
    shift
    ./tools/release-check.sh "$@"
    ;;
  serve)
    shift
    (cd services/runner && go run ./cmd/reach-serve "$@")
    ;;
  federation)
    shift
    (cd services/runner && go run ./cmd/reachctl federation "$@")
    ;;
  support)
    shift
    (cd services/runner && go run ./cmd/reachctl support "$@")
    ;;
  arcade)
    shift
    (cd services/runner && go run ./cmd/reachctl arcade "$@")
    ;;
  capsule)
    shift
    (cd services/runner && go run ./cmd/reachctl capsule "$@")
    ;;
  proof)
    shift
    (cd services/runner && go run ./cmd/reachctl proof "$@")
    ;;
  graph)
    shift
    (cd services/runner && go run ./cmd/reachctl graph "$@")
    ;;
  packs)
    shift
    (cd services/runner && go run ./cmd/reachctl packs "$@")
    ;;
  init)
    shift
    (cd services/runner && go run ./cmd/reachctl init "$@")
    ;;
  explain)
    shift
    (cd services/runner && go run ./cmd/reachctl explain "$@")
    ;;
  operator)
    shift
    (cd services/runner && go run ./cmd/reachctl operator "$@")
    ;;
  pack)
    shift
    (cd services/runner && go run ./cmd/reachctl pack "$@")
    ;;
  *)
    echo "usage: reach doctor|release-check|serve|federation|support|arcade|capsule|proof|graph|packs|init|explain|operator|pack" >&2
    exit 1
    ;;

esac
