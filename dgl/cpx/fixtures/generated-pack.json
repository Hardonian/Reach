{
  "pack_version": "1.0",
  "provider": "local",
  "model": "test",
  "agent_id": "cli",
  "task_class": "infra",
  "base_sha": "ed80ef22a370abab2f1878ee5381bb46241749d3",
  "head_sha": "77c8a7cba023a6b63ed9e3ab03a883992e96030b",
  "diff": {
    "format": "git",
    "content": "diff --git a/apps/arcade/src/app/governance/dgl/page.tsx b/apps/arcade/src/app/governance/dgl/page.tsx\nindex 70c16bb..383f785 100644\n--- a/apps/arcade/src/app/governance/dgl/page.tsx\n+++ b/apps/arcade/src/app/governance/dgl/page.tsx\n@@ -9,10 +9,14 @@ type DglApiResponse = {\n       summary?: {\n         intent_alignment_score?: number;\n         semantic_drift_score?: number;\n+        blast_radius_score?: number;\n       };\n+      blast_radius?: { score?: number };\n+      economics?: { diff_size?: number; passes_to_converge?: number; repair_cycles?: number };\n+      drift_forecast_score?: number;\n       turbulence_hotspots?: Array<{ path: string; reason: string; count: number }>;\n     } | null;\n-    provider_matrix: Array<{ provider: string; model: string; pass_rate: number; calibration_score: number }>;\n+    provider_matrix: Array<{ provider: string; model: string; pass_rate: number; calibration_score: number; revert_ratio?: number; trust_boundary_touch_rate?: number }>;\n     violations: Array<{ type: string; severity: string; paths: string[]; line?: number }>;\n     turbulence_hotspots: Array<{ path: string; reason: string; count: number }>;\n   };\n@@ -26,6 +30,7 @@ export default function DglGovernancePage() {\n   const [loading, setLoading] = useState(true);\n   const [error, setError] = useState('');\n   const [data, setData] = useState<DglApiResponse['data']>();\n+  const [sortBy, setSortBy] = useState<'pass_rate' | 'calibration_score'>('pass_rate');\n \n   const query = useMemo(() => {\n     const params = new URLSearchParams();\n@@ -35,6 +40,8 @@ export default function DglGovernancePage() {\n     return params.toString();\n   }, [branch, provider, subsystem]);\n \n+  const sortedProviderMatrix = useMemo(() => [...(data?.provider_matrix ?? [])].sort((a, b) => (Number(b[sortBy] ?? 0) - Number(a[sortBy] ?? 0))), [data?.provider_matrix, sortBy]);\n+\n   useEffect(() => {\n     let cancelled = false;\n     async function load(): Promise<void> {\n@@ -98,21 +105,36 @@ export default function DglGovernancePage() {\n             </div>\n           </section>\n \n+          <section className=\"grid md:grid-cols-3 gap-4\">\n+            <div className=\"rounded-lg border border-border p-4 bg-surface\">\n+              <p className=\"text-sm text-gray-400\">Blast Radius</p>\n+              <p className=\"text-3xl font-semibold\">{data.report.blast_radius?.score ?? data.report.summary?.blast_radius_score ?? 0}</p>\n+            </div>\n+            <div className=\"rounded-lg border border-border p-4 bg-surface\">\n+              <p className=\"text-sm text-gray-400\">Drift Forecast</p>\n+              <p className=\"text-3xl font-semibold\">{Math.round((data.report.drift_forecast_score ?? 0) * 100)}%</p>\n+            </div>\n+            <div className=\"rounded-lg border border-border p-4 bg-surface\">\n+              <p className=\"text-sm text-gray-400\">Economic Diff Size</p>\n+              <p className=\"text-3xl font-semibold\">{data.report.economics?.diff_size ?? 0}</p>\n+            </div>\n+          </section>\n+\n           <section className=\"rounded-lg border border-border p-4 bg-surface\">\n             <h2 className=\"text-lg font-semibold mb-3\">Provider Drift Matrix</h2>\n-            {data.provider_matrix.length === 0 ? (\n+            <div className=\"mb-3 flex items-center gap-2 text-sm\"><label htmlFor=\"provider-sort\" className=\"text-gray-400\">Sort by</label><select id=\"provider-sort\" className=\"px-2 py-1 rounded border border-border bg-surface\" value={sortBy} onChange={(e) => setSortBy(e.target.value as \"pass_rate\" | \"calibration_score\")}><option value=\"pass_rate\">Pass rate</option><option value=\"calibration_score\">Calibration</option></select></div>{data.provider_matrix.length === 0 ? (\n               <p className=\"text-gray-400\">No provider telemetry found.</p>\n             ) : (\n               <table className=\"w-full text-sm\">\n                 <thead>\n                   <tr className=\"text-left text-gray-400 border-b border-border\">\n-                    <th className=\"py-2\">Provider</th><th>Model</th><th>CI Pass</th><th>Calibration</th>\n+                    <th className=\"py-2\">Provider</th><th>Model</th><th>CI Pass</th><th>Calibration</th><th>Revert</th><th>Trust Touch</th>\n                   </tr>\n                 </thead>\n                 <tbody>\n-                  {data.provider_matrix.map((p) => (\n+                  {sortedProviderMatrix.map((p) => (\n                     <tr key={`${p.provider}-${p.model}`} className=\"border-b border-border/50\">\n-                      <td className=\"py-2\">{p.provider}</td><td>{p.model}</td><td>{Math.round((p.pass_rate ?? 0) * 100)}%</td><td>{(p.calibration_score ?? 0).toFixed(2)}</td>\n+                      <td className=\"py-2\">{p.provider}</td><td>{p.model}</td><td>{Math.round((p.pass_rate ?? 0) * 100)}%</td><td>{(p.calibration_score ?? 0).toFixed(2)}</td><td>{Math.round((p.revert_ratio ?? 0) * 100)}%</td><td>{Math.round((p.trust_boundary_touch_rate ?? 0) * 100)}%</td>\n                     </tr>\n                   ))}\n                 </tbody>\ndiff --git a/config/dgl-performance.json b/config/dgl-performance.json\nnew file mode 100644\nindex 0000000..802ea18\n--- /dev/null\n+++ b/config/dgl-performance.json\n@@ -0,0 +1,9 @@\n+{\n+  \"nested_loop_threshold\": 2,\n+  \"import_graph_growth_warn\": 30,\n+  \"import_graph_growth_error\": 80,\n+  \"cyclomatic_warn\": 15,\n+  \"cyclomatic_error\": 30,\n+  \"bundle_diff_warn_kb\": 100,\n+  \"bundle_diff_error_kb\": 250\n+}\ndiff --git a/config/dgl-security-boundaries.json b/config/dgl-security-boundaries.json\nnew file mode 100644\nindex 0000000..f76599c\n--- /dev/null\n+++ b/config/dgl-security-boundaries.json\n@@ -0,0 +1,9 @@\n+[\n+  \"auth/**\",\n+  \"billing/**\",\n+  \"webhook\",\n+  \"encryption\",\n+  \"raw body\",\n+  \"apps/arcade/src/app/api/v1/auth\",\n+  \"apps/arcade/src/app/api/v1/billing\"\n+]\ndiff --git a/dgl/agent-contract.schema.json b/dgl/agent-contract.schema.json\nnew file mode 100644\nindex 0000000..2f07305\n--- /dev/null\n+++ b/dgl/agent-contract.schema.json\n@@ -0,0 +1,20 @@\n+{\n+  \"$schema\": \"https://json-schema.org/draft/2020-12/schema\",\n+  \"$id\": \"https://reach.dev/schemas/dgl/agent-contract.schema.json\",\n+  \"title\": \"Reach Agent Operating Contract\",\n+  \"type\": \"object\",\n+  \"additionalProperties\": false,\n+  \"properties\": {\n+    \"provider\": { \"type\": \"string\", \"minLength\": 1 },\n+    \"model\": { \"type\": \"string\", \"minLength\": 1 },\n+    \"agent_id\": { \"type\": \"string\", \"minLength\": 1 },\n+    \"task_class\": { \"type\": \"string\", \"enum\": [\"refactor\", \"bugfix\", \"docs\", \"security\", \"perf\", \"ui\", \"infra\"] },\n+    \"changed_paths\": { \"type\": \"array\", \"items\": { \"type\": \"string\" } },\n+    \"risk_summary\": { \"type\": \"string\" },\n+    \"confidence\": { \"type\": \"number\", \"minimum\": 0, \"maximum\": 1 },\n+    \"claimed_invariants_changed\": { \"type\": \"array\", \"items\": { \"type\": \"string\" } },\n+    \"requires_acknowledgement\": { \"type\": \"boolean\" },\n+    \"context_hash\": { \"type\": \"string\" }\n+  },\n+  \"required\": [\"provider\", \"model\", \"agent_id\", \"task_class\", \"changed_paths\", \"risk_summary\", \"confidence\", \"claimed_invariants_changed\", \"requires_acknowledgement\"]\n+}\ndiff --git a/dgl/examples/dgl_report.generated.json b/dgl/examples/dgl_report.generated.json\nindex 25c1dd8..98d5217 100644\n--- a/dgl/examples/dgl_report.generated.json\n+++ b/dgl/examples/dgl_report.generated.json\n@@ -1,46 +1,353 @@\n {\n-  \"schema_version\": \"1.0.0\",\n-  \"run_id\": \"dgl_1771971648407\",\n-  \"timestamp\": \"2026-02-24T22:20:48.407Z\",\n+  \"schema_version\": \"1.1.0\",\n+  \"run_id\": \"dgl_1771977041566\",\n+  \"timestamp\": \"2026-02-24T23:50:41.566Z\",\n   \"repo\": \"Reach\",\n-  \"base_sha\": \"ac11857d063f6ea2950fb0368e3b20127acd75d7\",\n-  \"head_sha\": \"9720a30a0791515be43e243b9eced0f4baf8fae7\",\n+  \"base_sha\": \"HEAD~1\",\n+  \"head_sha\": \"HEAD\",\n+  \"context_hash\": \"4309af6cf90dd950a69d696c29506d4d8cdae9c393123ed2b2cca4b13f3e7b2e\",\n+  \"blast_radius\": {\n+    \"score\": 100,\n+    \"subsystems_touched\": 9,\n+    \"dependency_depth_impacted\": 10,\n+    \"public_api_surface_affected\": 11,\n+    \"openapi_endpoints_touched\": 15,\n+    \"bundle_sensitive_files_touched\": 1\n+  },\n+  \"economics\": {\n+    \"tokens_consumed\": 0,\n+    \"diff_size\": 960,\n+    \"passes_to_converge\": 1,\n+    \"repair_cycles\": 0,\n+    \"cost_per_accepted_change\": 0\n+  },\n   \"summary\": {\n-    \"intent_alignment_score\": 100,\n+    \"intent_alignment_score\": 60,\n     \"terminology_drift_score\": 100,\n-    \"semantic_drift_score\": 90,\n+    \"semantic_drift_score\": 70,\n     \"trust_boundary_change_score\": 100,\n-    \"calibration_score\": 50\n+    \"calibration_score\": 50,\n+    \"blast_radius_score\": 100\n+  },\n+  \"timings_ms\": {\n+    \"language_scan\": 0,\n+    \"intent\": 17,\n+    \"openapi\": 12,\n+    \"semantic\": 1639,\n+    \"trust_boundary\": 0,\n+    \"report_write\": 2\n+  },\n+  \"openapi_compat_summary\": {\n+    \"scanned_specs\": [\n+      \"/workspace/Reach/openapi/reach.openapi.yaml\",\n+      \"/workspace/Reach/openapi/reach.openapi.yaml\"\n+    ],\n+    \"breaking\": 0,\n+    \"warnings\": 0\n   },\n   \"violations\": [\n     {\n       \"type\": \"dependency_graph\",\n       \"severity\": \"warn\",\n       \"paths\": [\n-        \"apps/arcade/package.json\"\n+        \"package.json\"\n       ],\n       \"evidence\": \"Dependency declaration changed.\",\n-      \"suggested_fix\": \"Review high-risk deps (auth/network/crypto/telemetry) before merge.\"\n+      \"suggested_fix\": \"Review high-risk deps (auth/network/crypto/telemetry) before merge.\",\n+      \"line\": 1\n+    },\n+    {\n+      \"type\": \"semantic\",\n+      \"severity\": \"warn\",\n+      \"paths\": [\n+        \"src/dgl/index.ts\"\n+      ],\n+      \"evidence\": \"Export 'scanDgl' signature changed: fn(baseSha,headSha):DglReport -> fn(baseSha,headSha,changedOnly):DglReport.\",\n+      \"suggested_fix\": \"Verify downstream compatibility and update callers/contracts.\",\n+      \"line\": 77\n+    },\n+    {\n+      \"type\": \"semantic\",\n+      \"severity\": \"warn\",\n+      \"paths\": [\n+        \"src/dgl/types.ts\"\n+      ],\n+      \"evidence\": \"Export 'DglViolationType' signature changed: type:| \\\"terminology\\\"\\n  | \\\"intent\\\"\\n  | \\\"semantic\\\"\\n  | \\\"trust_boundary\\\"\\n  | \\\"api_contract\\\"\\n  | \\\"dependency_graph\\\"\\n  | \\\"memory_context\\\" -> type:| \\\"terminology\\\"\\n  | \\\"intent\\\"\\n  | \\\"semantic\\\"\\n  | \\\"trust_boundary\\\"\\n  | \\\"api_contract\\\"\\n  | \\\"dependency_graph\\\"\\n  | \\\"memory_context\\\"\\n  | \\\"openapi\\\".\",\n+      \"suggested_fix\": \"Verify downstream compatibility and update callers/contracts.\",\n+      \"line\": 1\n+    },\n+    {\n+      \"type\": \"semantic\",\n+      \"severity\": \"warn\",\n+      \"paths\": [\n+        \"src/dgl/types.ts\"\n+      ],\n+      \"evidence\": \"Export 'DglReport' signature changed: interface:11 -> interface:13.\",\n+      \"suggested_fix\": \"Verify downstream compatibility and update callers/contracts.\",\n+      \"line\": 20\n+    },\n+    {\n+      \"type\": \"performance\",\n+      \"severity\": \"warn\",\n+      \"paths\": [\n+        \"apps/arcade/src/app/api/dgl/runs/[id]/route.ts\"\n+      ],\n+      \"evidence\": \"Synchronous blocking call found in route layer.\",\n+      \"suggested_fix\": \"Use async non-blocking IO on route-layer paths.\",\n+      \"line\": 1\n+    },\n+    {\n+      \"type\": \"performance\",\n+      \"severity\": \"warn\",\n+      \"paths\": [\n+        \"apps/arcade/src/app/api/dgl/runs/[id]/turbulence/route.ts\"\n+      ],\n+      \"evidence\": \"Synchronous blocking call found in route layer.\",\n+      \"suggested_fix\": \"Use async non-blocking IO on route-layer paths.\",\n+      \"line\": 1\n+    },\n+    {\n+      \"type\": \"performance\",\n+      \"severity\": \"warn\",\n+      \"paths\": [\n+        \"apps/arcade/src/app/api/dgl/runs/[id]/violations/route.ts\"\n+      ],\n+      \"evidence\": \"Synchronous blocking call found in route layer.\",\n+      \"suggested_fix\": \"Use async non-blocking IO on route-layer paths.\",\n+      \"line\": 1\n+    },\n+    {\n+      \"type\": \"performance\",\n+      \"severity\": \"warn\",\n+      \"paths\": [\n+        \"apps/arcade/src/app/api/dgl/runs/route.ts\"\n+      ],\n+      \"evidence\": \"Synchronous blocking call found in route layer.\",\n+      \"suggested_fix\": \"Use async non-blocking IO on route-layer paths.\",\n+      \"line\": 1\n+    },\n+    {\n+      \"type\": \"performance\",\n+      \"severity\": \"warn\",\n+      \"paths\": [\n+        \"src/cli/reach-cli.ts\"\n+      ],\n+      \"evidence\": \"Detected 4 loops; threshold 2.\",\n+      \"suggested_fix\": \"Refactor nested loops or add indexing to reduce worst-case complexity.\",\n+      \"line\": 1\n+    },\n+    {\n+      \"type\": \"performance\",\n+      \"severity\": \"error\",\n+      \"paths\": [\n+        \"src/dgl/index.ts\"\n+      ],\n+      \"evidence\": \"Detected 5 loops; threshold 2.\",\n+      \"suggested_fix\": \"Refactor nested loops or add indexing to reduce worst-case complexity.\",\n+      \"line\": 1\n+    },\n+    {\n+      \"type\": \"performance\",\n+      \"severity\": \"error\",\n+      \"paths\": [\n+        \"src/dgl/openapi-compat.ts\"\n+      ],\n+      \"evidence\": \"Detected 9 loops; threshold 2.\",\n+      \"suggested_fix\": \"Refactor nested loops or add indexing to reduce worst-case complexity.\",\n+      \"line\": 1\n     }\n   ],\n+  \"provider_matrix\": [\n+    {\n+      \"provider\": \"openai\",\n+      \"model\": \"gpt-5.2-codex\",\n+      \"pass_rate\": 1,\n+      \"revert_ratio\": 0,\n+      \"trust_boundary_touch_rate\": 0,\n+      \"openapi_break_frequency\": 0,\n+      \"route_test_failure_frequency\": 0,\n+      \"calibration_score\": 0.89,\n+      \"diff_magnitude_avg\": 42\n+    },\n+    {\n+      \"provider\": \"anthropic\",\n+      \"model\": \"claude-sonnet\",\n+      \"pass_rate\": 1,\n+      \"revert_ratio\": 0,\n+      \"trust_boundary_touch_rate\": 1,\n+      \"openapi_break_frequency\": 0,\n+      \"route_test_failure_frequency\": 0,\n+      \"calibration_score\": 0.78,\n+      \"diff_magnitude_avg\": 57\n+    },\n+    {\n+      \"provider\": \"openrouter\",\n+      \"model\": \"mixtral\",\n+      \"pass_rate\": 0,\n+      \"revert_ratio\": 1,\n+      \"trust_boundary_touch_rate\": 1,\n+      \"openapi_break_frequency\": 1,\n+      \"route_test_failure_frequency\": 1,\n+      \"calibration_score\": 0.09999999999999998,\n+      \"diff_magnitude_avg\": 121\n+    },\n+    {\n+      \"provider\": \"local\",\n+      \"model\": \"gpt-5.2-codex\",\n+      \"pass_rate\": 1,\n+      \"revert_ratio\": 0,\n+      \"trust_boundary_touch_rate\": 0,\n+      \"openapi_break_frequency\": 0,\n+      \"route_test_failure_frequency\": 0,\n+      \"calibration_score\": 0.8,\n+      \"diff_magnitude_avg\": 0\n+    },\n+    {\n+      \"provider\": \"openrouter\",\n+      \"model\": \"gemini-pro\",\n+      \"pass_rate\": 0,\n+      \"revert_ratio\": 1,\n+      \"trust_boundary_touch_rate\": 0,\n+      \"openapi_break_frequency\": 0,\n+      \"route_test_failure_frequency\": 0,\n+      \"calibration_score\": 0.30000000000000004,\n+      \"diff_magnitude_avg\": 0\n+    }\n+  ],\n+  \"drift_forecast_score\": 0.8945454545454545,\n   \"turbulence_hotspots\": [\n     {\n-      \"path\": \".github/workflows/prelaunch-gate.yml\",\n+      \"path\": \"VERIFY_DGL.md\",\n+      \"reason\": \"recently changed\",\n+      \"count\": 1\n+    },\n+    {\n+      \"path\": \"apps/arcade/src/app/api/dgl/runs/[id]/route.ts\",\n+      \"reason\": \"recently changed\",\n+      \"count\": 1\n+    },\n+    {\n+      \"path\": \"apps/arcade/src/app/api/dgl/runs/[id]/turbulence/route.ts\",\n+      \"reason\": \"recently changed\",\n+      \"count\": 1\n+    },\n+    {\n+      \"path\": \"apps/arcade/src/app/api/dgl/runs/[id]/violations/route.ts\",\n+      \"reason\": \"recently changed\",\n+      \"count\": 1\n+    },\n+    {\n+      \"path\": \"apps/arcade/src/app/api/dgl/runs/route.ts\",\n+      \"reason\": \"recently changed\",\n+      \"count\": 1\n+    },\n+    {\n+      \"path\": \"apps/arcade/src/lib/dgl-runs-api.ts\",\n+      \"reason\": \"recently changed\",\n+      \"count\": 1\n+    },\n+    {\n+      \"path\": \"config/dgl-openapi.json\",\n+      \"reason\": \"recently changed\",\n+      \"count\": 1\n+    },\n+    {\n+      \"path\": \"dgl/examples/openapi_compat.breaking.json\",\n+      \"reason\": \"recently changed\",\n+      \"count\": 1\n+    },\n+    {\n+      \"path\": \"dgl/examples/openapi_compat.warn.json\",\n+      \"reason\": \"recently changed\",\n+      \"count\": 1\n+    },\n+    {\n+      \"path\": \"dgl/fixtures/openapi/base.json\",\n+      \"reason\": \"recently changed\",\n+      \"count\": 1\n+    },\n+    {\n+      \"path\": \"dgl/fixtures/openapi/base.yaml\",\n+      \"reason\": \"recently changed\",\n+      \"count\": 1\n+    },\n+    {\n+      \"path\": \"dgl/fixtures/openapi/head-breaking.json\",\n+      \"reason\": \"recently changed\",\n+      \"count\": 1\n+    },\n+    {\n+      \"path\": \"dgl/fixtures/openapi/head-breaking.yaml\",\n+      \"reason\": \"recently changed\",\n+      \"count\": 1\n+    },\n+    {\n+      \"path\": \"dgl/fixtures/openapi/head-warn.json\",\n+      \"reason\": \"recently changed\",\n+      \"count\": 1\n+    },\n+    {\n+      \"path\": \"dgl/fixtures/openapi/head-warn.yaml\",\n+      \"reason\": \"recently changed\",\n+      \"count\": 1\n+    },\n+    {\n+      \"path\": \"docs/architecture/dgl.md\",\n+      \"reason\": \"recently changed\",\n+      \"count\": 1\n+    },\n+    {\n+      \"path\": \"package-lock.json\",\n+      \"reason\": \"recently changed\",\n+      \"count\": 1\n+    },\n+    {\n+      \"path\": \"package.json\",\n+      \"reason\": \"recently changed\",\n+      \"count\": 1\n+    },\n+    {\n+      \"path\": \"scripts/dgl-gate.ts\",\n+      \"reason\": \"recently changed\",\n+      \"count\": 1\n+    },\n+    {\n+      \"path\": \"scripts/smoke-dgl.ts\",\n+      \"reason\": \"recently changed\",\n+      \"count\": 1\n+    },\n+    {\n+      \"path\": \"scripts/verify-dgl.ts\",\n+      \"reason\": \"recently changed\",\n+      \"count\": 1\n+    },\n+    {\n+      \"path\": \"src/cli/reach-cli.ts\",\n+      \"reason\": \"recently changed\",\n+      \"count\": 1\n+    },\n+    {\n+      \"path\": \"src/dgl/index.ts\",\n+      \"reason\": \"recently changed\",\n+      \"count\": 1\n+    },\n+    {\n+      \"path\": \"src/dgl/openapi-compat.test.ts\",\n       \"reason\": \"recently changed\",\n       \"count\": 1\n     },\n     {\n-      \"path\": \"README.md\",\n+      \"path\": \"src/dgl/openapi-compat.ts\",\n       \"reason\": \"recently changed\",\n       \"count\": 1\n     },\n     {\n-      \"path\": \"apps/arcade/package.json\",\n+      \"path\": \"src/dgl/routes-integration.test.ts\",\n       \"reason\": \"recently changed\",\n       \"count\": 1\n     },\n     {\n-      \"path\": \"apps/arcade/src/app/layout.tsx\",\n+      \"path\": \"src/dgl/types.ts\",\n       \"reason\": \"recently changed\",\n       \"count\": 1\n     }\ndiff --git a/dgl/examples/dgl_report.generated.md b/dgl/examples/dgl_report.generated.md\nindex 75e1c98..72ba1a9 100644\n--- a/dgl/examples/dgl_report.generated.md\n+++ b/dgl/examples/dgl_report.generated.md\n@@ -1,9 +1,23 @@\n-# DGL Report (dgl_1771971648407)\n+# DGL Report (dgl_1771977041566)\n \n-- Base: ac11857d063f6ea2950fb0368e3b20127acd75d7\n-- Head: 9720a30a0791515be43e243b9eced0f4baf8fae7\n-- Intent Alignment: 100\n-- Semantic Drift: 90\n+- Base: HEAD~1\n+- Head: HEAD\n+- Context Hash: 4309af6cf90dd950a69d696c29506d4d8cdae9c393123ed2b2cca4b13f3e7b2e\n+- Blast Radius: 100\n+- Drift Forecast: 89.5%\n+- Intent Alignment: 60\n+- Semantic Drift: 70\n+- OpenAPI Breaking: 0\n \n ## Violations\n-- **WARN** [dependency_graph] apps/arcade/package.json — Review high-risk deps (auth/network/crypto/telemetry) before merge.\n\\ No newline at end of file\n+- **WARN** [dependency_graph] package.json#L1 — Review high-risk deps (auth/network/crypto/telemetry) before merge.\n+- **WARN** [semantic] src/dgl/index.ts#L77 — Verify downstream compatibility and update callers/contracts.\n+- **WARN** [semantic] src/dgl/types.ts#L1 — Verify downstream compatibility and update callers/contracts.\n+- **WARN** [semantic] src/dgl/types.ts#L20 — Verify downstream compatibility and update callers/contracts.\n+- **WARN** [performance] apps/arcade/src/app/api/dgl/runs/[id]/route.ts#L1 — Use async non-blocking IO on route-layer paths.\n+- **WARN** [performance] apps/arcade/src/app/api/dgl/runs/[id]/turbulence/route.ts#L1 — Use async non-blocking IO on route-layer paths.\n+- **WARN** [performance] apps/arcade/src/app/api/dgl/runs/[id]/violations/route.ts#L1 — Use async non-blocking IO on route-layer paths.\n+- **WARN** [performance] apps/arcade/src/app/api/dgl/runs/route.ts#L1 — Use async non-blocking IO on route-layer paths.\n+- **WARN** [performance] src/cli/reach-cli.ts#L1 — Refactor nested loops or add indexing to reduce worst-case complexity.\n+- **ERROR** [performance] src/dgl/index.ts#L1 — Refactor nested loops or add indexing to reduce worst-case complexity.\n+- **ERROR** [performance] src/dgl/openapi-compat.ts#L1 — Refactor nested loops or add indexing to reduce worst-case complexity.\n\\ No newline at end of file\ndiff --git a/dgl/examples/supervisory-scenarios.json b/dgl/examples/supervisory-scenarios.json\nnew file mode 100644\nindex 0000000..6d81933\n--- /dev/null\n+++ b/dgl/examples/supervisory-scenarios.json\n@@ -0,0 +1,9 @@\n+{\n+  \"scenarios\": [\n+    \"openapi_break\",\n+    \"trust_boundary_change\",\n+    \"performance_regression\",\n+    \"large_blast_radius\",\n+    \"agent_overconfidence\"\n+  ]\n+}\ndiff --git a/dgl/fixtures/agent-contract.overconfidence.json b/dgl/fixtures/agent-contract.overconfidence.json\nnew file mode 100644\nindex 0000000..43a0cdd\n--- /dev/null\n+++ b/dgl/fixtures/agent-contract.overconfidence.json\n@@ -0,0 +1,12 @@\n+{\n+  \"provider\": \"openrouter\",\n+  \"model\": \"mixtral\",\n+  \"agent_id\": \"agent_risky_07\",\n+  \"task_class\": \"security\",\n+  \"changed_paths\": [\"apps/arcade/src/app/api/v1/billing/webhook/route.ts\"],\n+  \"risk_summary\": \"Claims no risk on trust-boundary route edits.\",\n+  \"confidence\": 0.99,\n+  \"claimed_invariants_changed\": [\"none\"],\n+  \"requires_acknowledgement\": false,\n+  \"context_hash\": \"outdated\"\n+}\ndiff --git a/dgl/fixtures/agent-contract.valid.json b/dgl/fixtures/agent-contract.valid.json\nnew file mode 100644\nindex 0000000..d0076ec\n--- /dev/null\n+++ b/dgl/fixtures/agent-contract.valid.json\n@@ -0,0 +1,11 @@\n+{\n+  \"provider\": \"openai\",\n+  \"model\": \"gpt-5.2-codex\",\n+  \"agent_id\": \"agent_supervisory_01\",\n+  \"task_class\": \"infra\",\n+  \"changed_paths\": [\"src/dgl/index.ts\", \"apps/arcade/src/app/governance/dgl/page.tsx\"],\n+  \"risk_summary\": \"Touches governance orchestration and dashboard rendering.\",\n+  \"confidence\": 0.82,\n+  \"claimed_invariants_changed\": [\"none\"],\n+  \"requires_acknowledgement\": false\n+}\ndiff --git a/dgl/report.schema.json b/dgl/report.schema.json\nnew file mode 100644\nindex 0000000..d87786a\n--- /dev/null\n+++ b/dgl/report.schema.json\n@@ -0,0 +1,32 @@\n+{\n+  \"$schema\": \"https://json-schema.org/draft/2020-12/schema\",\n+  \"$id\": \"https://reach.dev/schemas/dgl/report.schema.json\",\n+  \"title\": \"Reach DGL Report\",\n+  \"type\": \"object\",\n+  \"required\": [\"schema_version\", \"run_id\", \"timestamp\", \"repo\", \"base_sha\", \"head_sha\", \"summary\", \"violations\", \"turbulence_hotspots\"],\n+  \"properties\": {\n+    \"schema_version\": { \"type\": \"string\" },\n+    \"run_id\": { \"type\": \"string\" },\n+    \"timestamp\": { \"type\": \"string\" },\n+    \"repo\": { \"type\": \"string\" },\n+    \"base_sha\": { \"type\": \"string\" },\n+    \"head_sha\": { \"type\": \"string\" },\n+    \"context_hash\": { \"type\": \"string\" },\n+    \"blast_radius\": {\n+      \"type\": \"object\",\n+      \"properties\": { \"score\": { \"type\": \"number\" } }\n+    },\n+    \"openapi_compat_summary\": {\n+      \"type\": \"object\",\n+      \"properties\": {\n+        \"breaking\": { \"type\": \"number\" },\n+        \"warnings\": { \"type\": \"number\" }\n+      }\n+    },\n+    \"summary\": { \"type\": \"object\" },\n+    \"violations\": { \"type\": \"array\", \"items\": { \"type\": \"object\" } },\n+    \"economics\": { \"type\": \"object\" },\n+    \"drift_forecast_score\": { \"type\": \"number\" },\n+    \"turbulence_hotspots\": { \"type\": \"array\", \"items\": { \"type\": \"object\" } }\n+  }\n+}\ndiff --git a/dgl/reports/dgl_report.json b/dgl/reports/dgl_report.json\nindex 92e5dcd..98d5217 100644\n--- a/dgl/reports/dgl_report.json\n+++ b/dgl/reports/dgl_report.json\n@@ -1,21 +1,49 @@\n {\n-  \"schema_version\": \"1.0.0\",\n-  \"run_id\": \"dgl_1771973744890\",\n-  \"timestamp\": \"2026-02-24T22:55:44.890Z\",\n+  \"schema_version\": \"1.1.0\",\n+  \"run_id\": \"dgl_1771977041566\",\n+  \"timestamp\": \"2026-02-24T23:50:41.566Z\",\n   \"repo\": \"Reach\",\n-  \"base_sha\": \"9720a30a0791515be43e243b9eced0f4baf8fae7\",\n-  \"head_sha\": \"89cf84d653bb98d6a3fa3d084ba285e0442d2f05\",\n-  \"run_id\": \"dgl_1771972447876\",\n-  \"timestamp\": \"2026-02-24T22:34:07.876Z\",\n-  \"repo\": \"Reach\",\n-  \"base_sha\": \"bfbb5f956cedea346e32509c106b88b0ac48e2c2\",\n-  \"head_sha\": \"53c004c13ec60d385622303f2fb91802b8c732b1\",\n+  \"base_sha\": \"HEAD~1\",\n+  \"head_sha\": \"HEAD\",\n+  \"context_hash\": \"4309af6cf90dd950a69d696c29506d4d8cdae9c393123ed2b2cca4b13f3e7b2e\",\n+  \"blast_radius\": {\n+    \"score\": 100,\n+    \"subsystems_touched\": 9,\n+    \"dependency_depth_impacted\": 10,\n+    \"public_api_surface_affected\": 11,\n+    \"openapi_endpoints_touched\": 15,\n+    \"bundle_sensitive_files_touched\": 1\n+  },\n+  \"economics\": {\n+    \"tokens_consumed\": 0,\n+    \"diff_size\": 960,\n+    \"passes_to_converge\": 1,\n+    \"repair_cycles\": 0,\n+    \"cost_per_accepted_change\": 0\n+  },\n   \"summary\": {\n-    \"intent_alignment_score\": 100,\n+    \"intent_alignment_score\": 60,\n     \"terminology_drift_score\": 100,\n-    \"semantic_drift_score\": 100,\n+    \"semantic_drift_score\": 70,\n     \"trust_boundary_change_score\": 100,\n-    \"calibration_score\": 50\n+    \"calibration_score\": 50,\n+    \"blast_radius_score\": 100\n+  },\n+  \"timings_ms\": {\n+    \"language_scan\": 0,\n+    \"intent\": 17,\n+    \"openapi\": 12,\n+    \"semantic\": 1639,\n+    \"trust_boundary\": 0,\n+    \"report_write\": 2\n+  },\n+  \"openapi_compat_summary\": {\n+    \"scanned_specs\": [\n+      \"/workspace/Reach/openapi/reach.openapi.yaml\",\n+      \"/workspace/Reach/openapi/reach.openapi.yaml\"\n+    ],\n+    \"breaking\": 0,\n+    \"warnings\": 0\n   },\n   \"violations\": [\n     {\n@@ -27,70 +55,301 @@\n       \"evidence\": \"Dependency declaration changed.\",\n       \"suggested_fix\": \"Review high-risk deps (auth/network/crypto/telemetry) before merge.\",\n       \"line\": 1\n+    },\n+    {\n+      \"type\": \"semantic\",\n+      \"severity\": \"warn\",\n+      \"paths\": [\n+        \"src/dgl/index.ts\"\n+      ],\n+      \"evidence\": \"Export 'scanDgl' signature changed: fn(baseSha,headSha):DglReport -> fn(baseSha,headSha,changedOnly):DglReport.\",\n+      \"suggested_fix\": \"Verify downstream compatibility and update callers/contracts.\",\n+      \"line\": 77\n+    },\n+    {\n+      \"type\": \"semantic\",\n+      \"severity\": \"warn\",\n+      \"paths\": [\n+        \"src/dgl/types.ts\"\n+      ],\n+      \"evidence\": \"Export 'DglViolationType' signature changed: type:| \\\"terminology\\\"\\n  | \\\"intent\\\"\\n  | \\\"semantic\\\"\\n  | \\\"trust_boundary\\\"\\n  | \\\"api_contract\\\"\\n  | \\\"dependency_graph\\\"\\n  | \\\"memory_context\\\" -> type:| \\\"terminology\\\"\\n  | \\\"intent\\\"\\n  | \\\"semantic\\\"\\n  | \\\"trust_boundary\\\"\\n  | \\\"api_contract\\\"\\n  | \\\"dependency_graph\\\"\\n  | \\\"memory_context\\\"\\n  | \\\"openapi\\\".\",\n+      \"suggested_fix\": \"Verify downstream compatibility and update callers/contracts.\",\n+      \"line\": 1\n+    },\n+    {\n+      \"type\": \"semantic\",\n+      \"severity\": \"warn\",\n+      \"paths\": [\n+        \"src/dgl/types.ts\"\n+      ],\n+      \"evidence\": \"Export 'DglReport' signature changed: interface:11 -> interface:13.\",\n+      \"suggested_fix\": \"Verify downstream compatibility and update callers/contracts.\",\n+      \"line\": 20\n+    },\n+    {\n+      \"type\": \"performance\",\n+      \"severity\": \"warn\",\n+      \"paths\": [\n+        \"apps/arcade/src/app/api/dgl/runs/[id]/route.ts\"\n+      ],\n+      \"evidence\": \"Synchronous blocking call found in route layer.\",\n+      \"suggested_fix\": \"Use async non-blocking IO on route-layer paths.\",\n+      \"line\": 1\n+    },\n+    {\n+      \"type\": \"performance\",\n+      \"severity\": \"warn\",\n+      \"paths\": [\n+        \"apps/arcade/src/app/api/dgl/runs/[id]/turbulence/route.ts\"\n+      ],\n+      \"evidence\": \"Synchronous blocking call found in route layer.\",\n+      \"suggested_fix\": \"Use async non-blocking IO on route-layer paths.\",\n+      \"line\": 1\n+    },\n+    {\n+      \"type\": \"performance\",\n+      \"severity\": \"warn\",\n+      \"paths\": [\n+        \"apps/arcade/src/app/api/dgl/runs/[id]/violations/route.ts\"\n+      ],\n+      \"evidence\": \"Synchronous blocking call found in route layer.\",\n+      \"suggested_fix\": \"Use async non-blocking IO on route-layer paths.\",\n+      \"line\": 1\n+    },\n+    {\n+      \"type\": \"performance\",\n+      \"severity\": \"warn\",\n+      \"paths\": [\n+        \"apps/arcade/src/app/api/dgl/runs/route.ts\"\n+      ],\n+      \"evidence\": \"Synchronous blocking call found in route layer.\",\n+      \"suggested_fix\": \"Use async non-blocking IO on route-layer paths.\",\n+      \"line\": 1\n+    },\n+    {\n+      \"type\": \"performance\",\n+      \"severity\": \"warn\",\n+      \"paths\": [\n+        \"src/cli/reach-cli.ts\"\n+      ],\n+      \"evidence\": \"Detected 4 loops; threshold 2.\",\n+      \"suggested_fix\": \"Refactor nested loops or add indexing to reduce worst-case complexity.\",\n+      \"line\": 1\n+    },\n+    {\n+      \"type\": \"performance\",\n+      \"severity\": \"error\",\n+      \"paths\": [\n+        \"src/dgl/index.ts\"\n+      ],\n+      \"evidence\": \"Detected 5 loops; threshold 2.\",\n+      \"suggested_fix\": \"Refactor nested loops or add indexing to reduce worst-case complexity.\",\n+      \"line\": 1\n+    },\n+    {\n+      \"type\": \"performance\",\n+      \"severity\": \"error\",\n+      \"paths\": [\n+        \"src/dgl/openapi-compat.ts\"\n+      ],\n+      \"evidence\": \"Detected 9 loops; threshold 2.\",\n+      \"suggested_fix\": \"Refactor nested loops or add indexing to reduce worst-case complexity.\",\n+      \"line\": 1\n     }\n   ],\n-  \"turbulence_hotspots\": [\n+  \"provider_matrix\": [\n+    {\n+      \"provider\": \"openai\",\n+      \"model\": \"gpt-5.2-codex\",\n+      \"pass_rate\": 1,\n+      \"revert_ratio\": 0,\n+      \"trust_boundary_touch_rate\": 0,\n+      \"openapi_break_frequency\": 0,\n+      \"route_test_failure_frequency\": 0,\n+      \"calibration_score\": 0.89,\n+      \"diff_magnitude_avg\": 42\n+    },\n+    {\n+      \"provider\": \"anthropic\",\n+      \"model\": \"claude-sonnet\",\n+      \"pass_rate\": 1,\n+      \"revert_ratio\": 0,\n+      \"trust_boundary_touch_rate\": 1,\n+      \"openapi_break_frequency\": 0,\n+      \"route_test_failure_frequency\": 0,\n+      \"calibration_score\": 0.78,\n+      \"diff_magnitude_avg\": 57\n+    },\n+    {\n+      \"provider\": \"openrouter\",\n+      \"model\": \"mixtral\",\n+      \"pass_rate\": 0,\n+      \"revert_ratio\": 1,\n+      \"trust_boundary_touch_rate\": 1,\n+      \"openapi_break_frequency\": 1,\n+      \"route_test_failure_frequency\": 1,\n+      \"calibration_score\": 0.09999999999999998,\n+      \"diff_magnitude_avg\": 121\n+    },\n+    {\n+      \"provider\": \"local\",\n+      \"model\": \"gpt-5.2-codex\",\n+      \"pass_rate\": 1,\n+      \"revert_ratio\": 0,\n+      \"trust_boundary_touch_rate\": 0,\n+      \"openapi_break_frequency\": 0,\n+      \"route_test_failure_frequency\": 0,\n+      \"calibration_score\": 0.8,\n+      \"diff_magnitude_avg\": 0\n+    },\n     {\n-      \"path\": \".github/workflows/verify.yml\",\n-  \"violations\": [],\n+      \"provider\": \"openrouter\",\n+      \"model\": \"gemini-pro\",\n+      \"pass_rate\": 0,\n+      \"revert_ratio\": 1,\n+      \"trust_boundary_touch_rate\": 0,\n+      \"openapi_break_frequency\": 0,\n+      \"route_test_failure_frequency\": 0,\n+      \"calibration_score\": 0.30000000000000004,\n+      \"diff_magnitude_avg\": 0\n+    }\n+  ],\n+  \"drift_forecast_score\": 0.8945454545454545,\n   \"turbulence_hotspots\": [\n     {\n-      \"path\": \"apps/arcade/src/app/api/governance/dgl/route.ts\",\n+      \"path\": \"VERIFY_DGL.md\",\n+      \"reason\": \"recently changed\",\n+      \"count\": 1\n+    },\n+    {\n+      \"path\": \"apps/arcade/src/app/api/dgl/runs/[id]/route.ts\",\n+      \"reason\": \"recently changed\",\n+      \"count\": 1\n+    },\n+    {\n+      \"path\": \"apps/arcade/src/app/api/dgl/runs/[id]/turbulence/route.ts\",\n+      \"reason\": \"recently changed\",\n+      \"count\": 1\n+    },\n+    {\n+      \"path\": \"apps/arcade/src/app/api/dgl/runs/[id]/violations/route.ts\",\n+      \"reason\": \"recently changed\",\n+      \"count\": 1\n+    },\n+    {\n+      \"path\": \"apps/arcade/src/app/api/dgl/runs/route.ts\",\n+      \"reason\": \"recently changed\",\n+      \"count\": 1\n+    },\n+    {\n+      \"path\": \"apps/arcade/src/lib/dgl-runs-api.ts\",\n+      \"reason\": \"recently changed\",\n+      \"count\": 1\n+    },\n+    {\n+      \"path\": \"config/dgl-openapi.json\",\n+      \"reason\": \"recently changed\",\n+      \"count\": 1\n+    },\n+    {\n+      \"path\": \"dgl/examples/openapi_compat.breaking.json\",\n+      \"reason\": \"recently changed\",\n+      \"count\": 1\n+    },\n+    {\n+      \"path\": \"dgl/examples/openapi_compat.warn.json\",\n+      \"reason\": \"recently changed\",\n+      \"count\": 1\n+    },\n+    {\n+      \"path\": \"dgl/fixtures/openapi/base.json\",\n       \"reason\": \"recently changed\",\n       \"count\": 1\n     },\n     {\n-      \"path\": \"apps/arcade/src/app/governance/dgl/page.tsx\",\n+      \"path\": \"dgl/fixtures/openapi/base.yaml\",\n       \"reason\": \"recently changed\",\n       \"count\": 1\n     },\n     {\n-      \"path\": \"apps/arcade/src/app/governance/dgl/page.tsx\",\n-      \"path\": \"dgl/reports/dgl_report.json\",\n+      \"path\": \"dgl/fixtures/openapi/head-breaking.json\",\n       \"reason\": \"recently changed\",\n       \"count\": 1\n     },\n     {\n-      \"path\": \"apps/arcade/src/lib/dgl-governance-api.ts\",\n-      \"path\": \"dgl/reports/dgl_report.md\",\n+      \"path\": \"dgl/fixtures/openapi/head-breaking.yaml\",\n       \"reason\": \"recently changed\",\n       \"count\": 1\n     },\n     {\n-      \"path\": \"config/canonical-language.json\",\n-      \"path\": \"dgl/reports/dgl_report.sarif\",\n+      \"path\": \"dgl/fixtures/openapi/head-warn.json\",\n+      \"reason\": \"recently changed\",\n+      \"count\": 1\n+    },\n+    {\n+      \"path\": \"dgl/fixtures/openapi/head-warn.yaml\",\n       \"reason\": \"recently changed\",\n       \"count\": 1\n     },\n     {\n-      \"path\": \"dgl/baselines/intent/work.json\",\n       \"path\": \"docs/architecture/dgl.md\",\n       \"reason\": \"recently changed\",\n       \"count\": 1\n     },\n     {\n-      \"path\": \"dgl/examples/dgl_report.generated.json\",\n-      \"path\": \"src/dgl/api-contract-diff.ts\",\n+      \"path\": \"package-lock.json\",\n+      \"reason\": \"recently changed\",\n+      \"count\": 1\n+    },\n+    {\n+      \"path\": \"package.json\",\n       \"reason\": \"recently changed\",\n       \"count\": 1\n     },\n     {\n-      \"path\": \"dgl/examples/dgl_report.generated.md\",\n-      \"path\": \"src/dgl/ast-diff.ts\",\n+      \"path\": \"scripts/dgl-gate.ts\",\n       \"reason\": \"recently changed\",\n       \"count\": 1\n     },\n     {\n-      \"path\": \"dgl/examples/dgl_report.json\",\n-      \"path\": \"src/dgl/dgl.test.ts\",\n+      \"path\": \"scripts/smoke-dgl.ts\",\n+      \"reason\": \"recently changed\",\n+      \"count\": 1\n+    },\n+    {\n+      \"path\": \"scripts/verify-dgl.ts\",\n+      \"reason\": \"recently changed\",\n+      \"count\": 1\n+    },\n+    {\n+      \"path\": \"src/cli/reach-cli.ts\",\n       \"reason\": \"recently changed\",\n       \"count\": 1\n     },\n     {\n-      \"path\": \"dgl/examples/dgl_report.md\",\n       \"path\": \"src/dgl/index.ts\",\n       \"reason\": \"recently changed\",\n       \"count\": 1\n+    },\n+    {\n+      \"path\": \"src/dgl/openapi-compat.test.ts\",\n+      \"reason\": \"recently changed\",\n+      \"count\": 1\n+    },\n+    {\n+      \"path\": \"src/dgl/openapi-compat.ts\",\n+      \"reason\": \"recently changed\",\n+      \"count\": 1\n+    },\n+    {\n+      \"path\": \"src/dgl/routes-integration.test.ts\",\n+      \"reason\": \"recently changed\",\n+      \"count\": 1\n+    },\n+    {\n+      \"path\": \"src/dgl/types.ts\",\n+      \"reason\": \"recently changed\",\n+      \"count\": 1\n     }\n   ]\n }\n\\ No newline at end of file\ndiff --git a/dgl/reports/dgl_report.md b/dgl/reports/dgl_report.md\nindex bc63870..72ba1a9 100644\n--- a/dgl/reports/dgl_report.md\n+++ b/dgl/reports/dgl_report.md\n@@ -1,14 +1,23 @@\n-# DGL Report (dgl_1771973744890)\n+# DGL Report (dgl_1771977041566)\n \n-- Base: 9720a30a0791515be43e243b9eced0f4baf8fae7\n-- Head: 89cf84d653bb98d6a3fa3d084ba285e0442d2f05\n-# DGL Report (dgl_1771972447876)\n-\n-- Base: bfbb5f956cedea346e32509c106b88b0ac48e2c2\n-- Head: 53c004c13ec60d385622303f2fb91802b8c732b1\n-- Intent Alignment: 100\n-- Semantic Drift: 100\n+- Base: HEAD~1\n+- Head: HEAD\n+- Context Hash: 4309af6cf90dd950a69d696c29506d4d8cdae9c393123ed2b2cca4b13f3e7b2e\n+- Blast Radius: 100\n+- Drift Forecast: 89.5%\n+- Intent Alignment: 60\n+- Semantic Drift: 70\n+- OpenAPI Breaking: 0\n \n ## Violations\n - **WARN** [dependency_graph] package.json#L1 — Review high-risk deps (auth/network/crypto/telemetry) before merge.\n-No violations detected.\n+- **WARN** [semantic] src/dgl/index.ts#L77 — Verify downstream compatibility and update callers/contracts.\n+- **WARN** [semantic] src/dgl/types.ts#L1 — Verify downstream compatibility and update callers/contracts.\n+- **WARN** [semantic] src/dgl/types.ts#L20 — Verify downstream compatibility and update callers/contracts.\n+- **WARN** [performance] apps/arcade/src/app/api/dgl/runs/[id]/route.ts#L1 — Use async non-blocking IO on route-layer paths.\n+- **WARN** [performance] apps/arcade/src/app/api/dgl/runs/[id]/turbulence/route.ts#L1 — Use async non-blocking IO on route-layer paths.\n+- **WARN** [performance] apps/arcade/src/app/api/dgl/runs/[id]/violations/route.ts#L1 — Use async non-blocking IO on route-layer paths.\n+- **WARN** [performance] apps/arcade/src/app/api/dgl/runs/route.ts#L1 — Use async non-blocking IO on route-layer paths.\n+- **WARN** [performance] src/cli/reach-cli.ts#L1 — Refactor nested loops or add indexing to reduce worst-case complexity.\n+- **ERROR** [performance] src/dgl/index.ts#L1 — Refactor nested loops or add indexing to reduce worst-case complexity.\n+- **ERROR** [performance] src/dgl/openapi-compat.ts#L1 — Refactor nested loops or add indexing to reduce worst-case complexity.\n\\ No newline at end of file\ndiff --git a/dgl/reports/dgl_report.sarif b/dgl/reports/dgl_report.sarif\nindex 3e96273..e55887f 100644\n--- a/dgl/reports/dgl_report.sarif\n+++ b/dgl/reports/dgl_report.sarif\n@@ -26,9 +26,188 @@\n               }\n             }\n           ]\n+        },\n+        {\n+          \"level\": \"warning\",\n+          \"message\": {\n+            \"text\": \"semantic: Verify downstream compatibility and update callers/contracts.\"\n+          },\n+          \"locations\": [\n+            {\n+              \"physicalLocation\": {\n+                \"artifactLocation\": {\n+                  \"uri\": \"src/dgl/index.ts\"\n+                },\n+                \"region\": {\n+                  \"startLine\": 77\n+                }\n+              }\n+            }\n+          ]\n+        },\n+        {\n+          \"level\": \"warning\",\n+          \"message\": {\n+            \"text\": \"semantic: Verify downstream compatibility and update callers/contracts.\"\n+          },\n+          \"locations\": [\n+            {\n+              \"physicalLocation\": {\n+                \"artifactLocation\": {\n+                  \"uri\": \"src/dgl/types.ts\"\n+                },\n+                \"region\": {\n+                  \"startLine\": 1\n+                }\n+              }\n+            }\n+          ]\n+        },\n+        {\n+          \"level\": \"warning\",\n+          \"message\": {\n+            \"text\": \"semantic: Verify downstream compatibility and update callers/contracts.\"\n+          },\n+          \"locations\": [\n+            {\n+              \"physicalLocation\": {\n+                \"artifactLocation\": {\n+                  \"uri\": \"src/dgl/types.ts\"\n+                },\n+                \"region\": {\n+                  \"startLine\": 20\n+                }\n+              }\n+            }\n+          ]\n+        },\n+        {\n+          \"level\": \"warning\",\n+          \"message\": {\n+            \"text\": \"performance: Use async non-blocking IO on route-layer paths.\"\n+          },\n+          \"locations\": [\n+            {\n+              \"physicalLocation\": {\n+                \"artifactLocation\": {\n+                  \"uri\": \"apps/arcade/src/app/api/dgl/runs/[id]/route.ts\"\n+                },\n+                \"region\": {\n+                  \"startLine\": 1\n+                }\n+              }\n+            }\n+          ]\n+        },\n+        {\n+          \"level\": \"warning\",\n+          \"message\": {\n+            \"text\": \"performance: Use async non-blocking IO on route-layer paths.\"\n+          },\n+          \"locations\": [\n+            {\n+              \"physicalLocation\": {\n+                \"artifactLocation\": {\n+                  \"uri\": \"apps/arcade/src/app/api/dgl/runs/[id]/turbulence/route.ts\"\n+                },\n+                \"region\": {\n+                  \"startLine\": 1\n+                }\n+              }\n+            }\n+          ]\n+        },\n+        {\n+          \"level\": \"warning\",\n+          \"message\": {\n+            \"text\": \"performance: Use async non-blocking IO on route-layer paths.\"\n+          },\n+          \"locations\": [\n+            {\n+              \"physicalLocation\": {\n+                \"artifactLocation\": {\n+                  \"uri\": \"apps/arcade/src/app/api/dgl/runs/[id]/violations/route.ts\"\n+                },\n+                \"region\": {\n+                  \"startLine\": 1\n+                }\n+              }\n+            }\n+          ]\n+        },\n+        {\n+          \"level\": \"warning\",\n+          \"message\": {\n+            \"text\": \"performance: Use async non-blocking IO on route-layer paths.\"\n+          },\n+          \"locations\": [\n+            {\n+              \"physicalLocation\": {\n+                \"artifactLocation\": {\n+                  \"uri\": \"apps/arcade/src/app/api/dgl/runs/route.ts\"\n+                },\n+                \"region\": {\n+                  \"startLine\": 1\n+                }\n+              }\n+            }\n+          ]\n+        },\n+        {\n+          \"level\": \"warning\",\n+          \"message\": {\n+            \"text\": \"performance: Refactor nested loops or add indexing to reduce worst-case complexity.\"\n+          },\n+          \"locations\": [\n+            {\n+              \"physicalLocation\": {\n+                \"artifactLocation\": {\n+                  \"uri\": \"src/cli/reach-cli.ts\"\n+                },\n+                \"region\": {\n+                  \"startLine\": 1\n+                }\n+              }\n+            }\n+          ]\n+        },\n+        {\n+          \"level\": \"error\",\n+          \"message\": {\n+            \"text\": \"performance: Refactor nested loops or add indexing to reduce worst-case complexity.\"\n+          },\n+          \"locations\": [\n+            {\n+              \"physicalLocation\": {\n+                \"artifactLocation\": {\n+                  \"uri\": \"src/dgl/index.ts\"\n+                },\n+                \"region\": {\n+                  \"startLine\": 1\n+                }\n+              }\n+            }\n+          ]\n+        },\n+        {\n+          \"level\": \"error\",\n+          \"message\": {\n+            \"text\": \"performance: Refactor nested loops or add indexing to reduce worst-case complexity.\"\n+          },\n+          \"locations\": [\n+            {\n+              \"physicalLocation\": {\n+                \"artifactLocation\": {\n+                  \"uri\": \"src/dgl/openapi-compat.ts\"\n+                },\n+                \"region\": {\n+                  \"startLine\": 1\n+                }\n+              }\n+            }\n+          ]\n         }\n       ]\n-      \"results\": []\n     }\n   ]\n }\n\\ No newline at end of file\ndiff --git a/dgl/reports/provider-matrix.json b/dgl/reports/provider-matrix.json\nindex 781da27..695d5ea 100644\n--- a/dgl/reports/provider-matrix.json\n+++ b/dgl/reports/provider-matrix.json\n@@ -1,16 +1,57 @@\n [\n+  {\n+    \"provider\": \"openai\",\n+    \"model\": \"gpt-5.2-codex\",\n+    \"pass_rate\": 1,\n+    \"revert_ratio\": 0,\n+    \"trust_boundary_touch_rate\": 0,\n+    \"openapi_break_frequency\": 0,\n+    \"route_test_failure_frequency\": 0,\n+    \"calibration_score\": 0.89,\n+    \"diff_magnitude_avg\": 42\n+  },\n+  {\n+    \"provider\": \"anthropic\",\n+    \"model\": \"claude-sonnet\",\n+    \"pass_rate\": 1,\n+    \"revert_ratio\": 0,\n+    \"trust_boundary_touch_rate\": 1,\n+    \"openapi_break_frequency\": 0,\n+    \"route_test_failure_frequency\": 0,\n+    \"calibration_score\": 0.78,\n+    \"diff_magnitude_avg\": 57\n+  },\n+  {\n+    \"provider\": \"openrouter\",\n+    \"model\": \"mixtral\",\n+    \"pass_rate\": 0,\n+    \"revert_ratio\": 1,\n+    \"trust_boundary_touch_rate\": 1,\n+    \"openapi_break_frequency\": 1,\n+    \"route_test_failure_frequency\": 1,\n+    \"calibration_score\": 0.09999999999999998,\n+    \"diff_magnitude_avg\": 121\n+  },\n   {\n     \"provider\": \"local\",\n     \"model\": \"gpt-5.2-codex\",\n     \"pass_rate\": 1,\n     \"revert_ratio\": 0,\n-    \"calibration_score\": 0.8\n+    \"trust_boundary_touch_rate\": 0,\n+    \"openapi_break_frequency\": 0,\n+    \"route_test_failure_frequency\": 0,\n+    \"calibration_score\": 0.8,\n+    \"diff_magnitude_avg\": 0\n   },\n   {\n     \"provider\": \"openrouter\",\n     \"model\": \"gemini-pro\",\n     \"pass_rate\": 0,\n     \"revert_ratio\": 1,\n-    \"calibration_score\": 0.30000000000000004\n+    \"trust_boundary_touch_rate\": 0,\n+    \"openapi_break_frequency\": 0,\n+    \"route_test_failure_frequency\": 0,\n+    \"calibration_score\": 0.30000000000000004,\n+    \"diff_magnitude_avg\": 0\n   }\n ]\n\\ No newline at end of file\ndiff --git a/dgl/telemetry/provider-metrics.jsonl b/dgl/telemetry/provider-metrics.jsonl\nnew file mode 100644\nindex 0000000..373f81c\n--- /dev/null\n+++ b/dgl/telemetry/provider-metrics.jsonl\n@@ -0,0 +1,3 @@\n+{\"provider\":\"openai\",\"model\":\"gpt-5.2-codex\",\"ci_pass\":true,\"reverted\":false,\"self_confidence\":0.89,\"trust_boundary_touch\":false,\"openapi_break\":false,\"route_test_fail\":false,\"diff_magnitude\":42}\n+{\"provider\":\"anthropic\",\"model\":\"claude-sonnet\",\"ci_pass\":true,\"reverted\":false,\"self_confidence\":0.78,\"trust_boundary_touch\":true,\"openapi_break\":false,\"route_test_fail\":false,\"diff_magnitude\":57}\n+{\"provider\":\"openrouter\",\"model\":\"mixtral\",\"ci_pass\":false,\"reverted\":true,\"self_confidence\":0.9,\"trust_boundary_touch\":true,\"openapi_break\":true,\"route_test_fail\":true,\"diff_magnitude\":121}\ndiff --git a/docs/architecture/dgl.md b/docs/architecture/dgl.md\nindex 01912b6..6ee094f 100644\n--- a/docs/architecture/dgl.md\n+++ b/docs/architecture/dgl.md\n@@ -86,3 +86,18 @@ New auth-gated endpoints:\n - `GET /api/dgl/runs/:id/turbulence?page&limit&severity&pathPrefix`\n \n All endpoints return structured 404/401 states and stable ordering for paginated tables.\n+\n+## Supervisory Intelligence Layer\n+\n+Reach now adds a supervisory layer on top of Determinism + Divergence with these primitives:\n+\n+- **Agent Operating Contract (AOC)**: strict output envelope at `dgl/agent-contract.schema.json`; validate via `reach agent validate <file>`.\n+- **Capability profiling**: telemetry store at `dgl/telemetry/provider-metrics.jsonl` feeding `reach dgl provider-matrix`.\n+- **Memory cohesion**: `context_snapshot_hash` combines architecture docs + canonical language + intent manifest hashes, exposed via `reach dgl context`.\n+- **Blast radius estimation**: DGL report includes blast radius score and impact dimensions.\n+- **Performance guard**: static checks configured in `config/dgl-performance.json`.\n+- **Security boundary guard**: high-risk zones in `config/dgl-security-boundaries.json` elevate severity + acknowledgement requirements.\n+- **Economic telemetry**: report includes diff size / convergence loops / optional token & cost metadata, exposed via `reach dgl economics`.\n+- **Drift forecasting + routing**: Bayesian-like drift estimate included in report and used by `reach dgl route --task-class X --subsystem Y --blast-radius N`.\n+\n+The ReadyLayer supervisory preset composes determinism + divergence + openapi + performance + security + route integration test checks under release gating.\ndiff --git a/package.json b/package.json\nindex df64680..5c8fd5b 100644\n--- a/package.json\n+++ b/package.json\n@@ -51,7 +51,10 @@\n     \"reach:run:show\": \"npx tsx scripts/dgl-gate.ts run-show\",\n     \"reach:run:list\": \"npx tsx scripts/dgl-gate.ts run-list\",\n     \"reach:run:export\": \"npx tsx scripts/dgl-gate.ts run-export\",\n-    \"test:routes\": \"vitest run src/dgl/routes-integration.test.ts\"\n+    \"test:routes\": \"vitest run src/dgl/routes-integration.test.ts\",\n+    \"reach:dgl:context\": \"npx tsx scripts/dgl-gate.ts context\",\n+    \"reach:dgl:economics\": \"npx tsx scripts/dgl-gate.ts economics\",\n+    \"reach:agent:validate\": \"npx tsx scripts/dgl-gate.ts agent-validate dgl/fixtures/agent-contract.valid.json\"\n   },\n   \"devDependencies\": {\n     \"@eslint/js\": \"^9.39.3\",\ndiff --git a/scripts/dgl-gate.ts b/scripts/dgl-gate.ts\nindex d693b6c..2cecf44 100644\n--- a/scripts/dgl-gate.ts\n+++ b/scripts/dgl-gate.ts\n@@ -2,7 +2,7 @@\n import fs from \"fs\";\n import path from \"path\";\n import { execSync } from \"child_process\";\n-import { scanDgl, toMarkdown, toSarif, computeIntentFingerprint } from \"../src/dgl/index.js\";\n+import { computeContextSnapshotHash, scanDgl, toMarkdown, toSarif, computeIntentFingerprint, validateAgentContractPayload } from \"../src/dgl/index.js\";\n import { compareOpenApi } from \"../src/dgl/openapi-compat.js\";\n \n const args = process.argv.slice(2);\n@@ -19,8 +19,31 @@ const changedOnly = !args.includes(\"--full\");\n const root = process.cwd();\n const outDir = path.join(root, \"dgl\", \"reports\");\n const runsDir = path.join(root, \"dgl\", \"run-records\");\n+const telemetryDir = path.join(root, \"dgl\", \"telemetry\");\n fs.mkdirSync(outDir, { recursive: true });\n fs.mkdirSync(runsDir, { recursive: true });\n+fs.mkdirSync(telemetryDir, { recursive: true });\n+\n+if (cmd === \"agent-validate\") {\n+  const file = args[1] || flag(\"--file\", \"\");\n+  if (!file) throw new Error(\"missing file path: use reach agent validate <file>\");\n+  const payload = JSON.parse(fs.readFileSync(path.resolve(root, file), \"utf-8\"));\n+  const result = validateAgentContractPayload(payload);\n+  console.log(JSON.stringify(result, null, 2));\n+  process.exit(result.ok ? 0 : 1);\n+}\n+\n+if (cmd === \"context\") {\n+  console.log(JSON.stringify({ context_hash: computeContextSnapshotHash() }, null, 2));\n+  process.exit(0);\n+}\n+\n+if (cmd === \"economics\") {\n+  const reportPath = path.join(outDir, \"dgl_report.json\");\n+  const report = fs.existsSync(reportPath) ? JSON.parse(fs.readFileSync(reportPath, \"utf-8\")) as { economics?: unknown } : {};\n+  console.log(JSON.stringify(report.economics ?? {}, null, 2));\n+  process.exit(0);\n+}\n \n if (cmd === \"doctor\") {\n   console.log(JSON.stringify({\n@@ -43,25 +66,43 @@ if (cmd === \"baseline\" && args.includes(\"--intent\")) {\n   const target = path.join(root, \"dgl/baselines/intent\", `${branch}.json`);\n   fs.mkdirSync(path.dirname(target), { recursive: true });\n   fs.writeFileSync(target, JSON.stringify({ branch, fingerprint: fp, updated_at: new Date().toISOString() }, null, 2));\n+  fs.writeFileSync(path.join(root, \"dgl\", \"baselines\", \"context.hash\"), `${computeContextSnapshotHash()}\\n`);\n   console.log(`intent baseline updated: ${target}`);\n   process.exit(0);\n }\n \n if (cmd === \"provider-matrix\") {\n-  const store = path.join(root, \"dgl\", \"provider-telemetry.jsonl\");\n-  const lines = fs.existsSync(store) ? fs.readFileSync(store, \"utf-8\").trim().split(\"\\n\").filter(Boolean) : [];\n-  const rows = lines.map((l) => JSON.parse(l) as { provider: string; model: string; ci_pass: boolean; reverted: boolean; self_confidence?: number });\n-  const grouped = new Map<string, { provider: string; model: string; total: number; pass: number; reverted: number; calibration: number }>();\n+  const primaryStore = path.join(root, \"dgl\", \"telemetry\", \"provider-metrics.jsonl\");\n+  const legacyStore = path.join(root, \"dgl\", \"provider-telemetry.jsonl\");\n+  const lines = [primaryStore, legacyStore]\n+    .filter((p) => fs.existsSync(p))\n+    .flatMap((p) => fs.readFileSync(p, \"utf-8\").trim().split(\"\\n\").filter(Boolean));\n+  const rows = lines.map((l) => JSON.parse(l) as { provider: string; model: string; ci_pass: boolean; reverted: boolean; self_confidence?: number; trust_boundary_touch?: boolean; openapi_break?: boolean; route_test_fail?: boolean; diff_magnitude?: number });\n+  const grouped = new Map<string, { provider: string; model: string; total: number; pass: number; reverted: number; calibration: number; trustTouches: number; openapiBreaks: number; routeFails: number; diffTotal: number }>();\n   for (const r of rows) {\n     const k = `${r.provider}::${r.model}`;\n-    const current = grouped.get(k) ?? { provider: r.provider, model: r.model, total: 0, pass: 0, reverted: 0, calibration: 0 };\n+    const current = grouped.get(k) ?? { provider: r.provider, model: r.model, total: 0, pass: 0, reverted: 0, calibration: 0, trustTouches: 0, openapiBreaks: 0, routeFails: 0, diffTotal: 0 };\n     current.total += 1;\n     if (r.ci_pass) current.pass += 1;\n     if (r.reverted) current.reverted += 1;\n+    if (r.trust_boundary_touch) current.trustTouches += 1;\n+    if (r.openapi_break) current.openapiBreaks += 1;\n+    if (r.route_test_fail) current.routeFails += 1;\n+    current.diffTotal += r.diff_magnitude ?? 0;\n     current.calibration += Math.abs((r.self_confidence ?? 0.5) - (r.ci_pass ? 1 : 0));\n     grouped.set(k, current);\n   }\n-  const out = [...grouped.values()].map((g) => ({ provider: g.provider, model: g.model, pass_rate: g.total ? g.pass / g.total : 0, revert_ratio: g.total ? g.reverted / g.total : 0, calibration_score: g.total ? 1 - g.calibration / g.total : 0.5 }));\n+  const out = [...grouped.values()].map((g) => ({\n+    provider: g.provider,\n+    model: g.model,\n+    pass_rate: g.total ? g.pass / g.total : 0,\n+    revert_ratio: g.total ? g.reverted / g.total : 0,\n+    trust_boundary_touch_rate: g.total ? g.trustTouches / g.total : 0,\n+    openapi_break_frequency: g.total ? g.openapiBreaks / g.total : 0,\n+    route_test_failure_frequency: g.total ? g.routeFails / g.total : 0,\n+    calibration_score: g.total ? 1 - g.calibration / g.total : 0.5,\n+    diff_magnitude_avg: g.total ? g.diffTotal / g.total : 0,\n+  }));\n   fs.writeFileSync(path.join(outDir, \"provider-matrix.json\"), JSON.stringify(out, null, 2));\n   console.log(JSON.stringify(out, null, 2));\n   process.exit(0);\n@@ -70,10 +111,13 @@ if (cmd === \"provider-matrix\") {\n if (cmd === \"route\") {\n   const taskClass = flag(\"--task-class\", \"bugfix\");\n   const subsystem = flag(\"--subsystem\", \"core\");\n+  const blastRadius = Number(flag(\"--blast-radius\", \"30\"));\n   const policy = JSON.parse(fs.readFileSync(path.join(root, \"dgl/routing/policy.json\"), \"utf-8\")) as { priors: Record<string, number>; providers: Array<{ provider: string; model: string; bias: number }> };\n   const prior = policy.priors[taskClass] ?? 0.3;\n-  const scored = policy.providers.map((p) => ({ ...p, risk: Math.max(0.01, Math.min(0.99, prior + p.bias + (subsystem === \"security\" ? 0.15 : 0))) })).sort((a, b) => a.risk - b.risk);\n-  console.log(JSON.stringify({ task_class: taskClass, subsystem, recommended: scored[0], alternatives: scored.slice(1) }, null, 2));\n+  const scored = policy.providers\n+    .map((p) => ({ ...p, risk: Math.max(0.01, Math.min(0.99, prior + p.bias + blastRadius / 200 + (subsystem === \"security\" ? 0.15 : 0))) }))\n+    .sort((a, b) => a.risk - b.risk);\n+  console.log(JSON.stringify({ task_class: taskClass, subsystem, blast_radius_score: blastRadius, recommended_provider: scored[0], reasoning_summary: \"Provider ranked by prior task drift, subsystem risk, and blast radius.\", alternatives: scored.slice(1) }, null, 2));\n   process.exit(0);\n }\n \n@@ -87,21 +131,19 @@ if (cmd === \"openapi\") {\n   process.exit(compat.summary.breaking > 0 ? 1 : 0);\n }\n \n-\n if (cmd === \"run-export\") {\n   const id = flag(\"--id\", \"\");\n   if (!id) throw new Error(\"missing run id: use run-export --id <id> --zip <path>\");\n   const outZip = flag(\"--zip\", path.join(root, \"dgl\", \"exports\", `${id}.zip`));\n   const runFile = path.join(runsDir, `${id}.json`);\n-  const run = JSON.parse(fs.readFileSync(runFile, 'utf-8')) as { dgl_report_paths?: string[] };\n+  const run = JSON.parse(fs.readFileSync(runFile, \"utf-8\")) as { dgl_report_paths?: string[] };\n   fs.mkdirSync(path.dirname(outZip), { recursive: true });\n-  const files = [...(run.dgl_report_paths ?? []), runFile].join(' ');\n+  const files = [...(run.dgl_report_paths ?? []), runFile].join(\" \");\n   execSync(`zip -j ${outZip} ${files}`);\n   console.log(JSON.stringify({ zip: outZip }, null, 2));\n   process.exit(0);\n }\n \n-\n if (cmd === \"run-list\") {\n   const runs = fs.readdirSync(runsDir).filter((f) => f.endsWith(\".json\")).sort();\n   console.log(JSON.stringify(runs, null, 2));\n@@ -115,6 +157,7 @@ if (cmd === \"run-show\") {\n   console.log(fs.readFileSync(run, \"utf-8\"));\n   process.exit(0);\n }\n+\n const report = scanDgl(base, head, changedOnly);\n const jsonPath = path.join(outDir, \"dgl_report.json\");\n const sarifPath = path.join(outDir, \"dgl_report.sarif\");\n@@ -135,7 +178,13 @@ fs.writeFileSync(runRecordPath, JSON.stringify({\n   dgl_report_paths: [jsonPath, mdPath, sarifPath],\n   openapi_compat_summary: report.openapi_compat_summary,\n   provider: report.provider ?? {},\n+  context_hash: report.context_hash,\n+  blast_radius: report.blast_radius,\n+  economics: report.economics,\n+  drift_forecast_score: report.drift_forecast_score,\n   summary_scores: report.summary,\n+  violations: report.violations,\n+  turbulence_hotspots: report.turbulence_hotspots,\n }, null, 2));\n \n if (cmd === \"gate\") {\ndiff --git a/src/cli/reach-cli.ts b/src/cli/reach-cli.ts\nindex fbd5e3a..902cff9 100644\n--- a/src/cli/reach-cli.ts\n+++ b/src/cli/reach-cli.ts\n@@ -697,6 +697,17 @@ async function dglCommand(subcommand: string | undefined, rest: string[], opts:\n   }\n }\n \n+\n+async function agentCommand(subcommand: string | undefined, rest: string[], opts: CliOptions): Promise<void> {\n+  if (subcommand !== 'validate') throw new Error('Unsupported agent command. Use: reach agent validate <file>');\n+  const file = rest[0];\n+  if (!file) throw new Error('Missing file path. Use: reach agent validate <file>');\n+  const cmd = `npx tsx scripts/dgl-gate.ts agent-validate ${file}`;\n+  const out = execSync(cmd, { encoding: 'utf-8' });\n+  if (opts.json) printJson(jsonOutput({ command: cmd, output: out.trim() }));\n+  else console.log(out.trim());\n+}\n+\n // ============================================================================\n // Main CLI dispatcher\n // ============================================================================\n@@ -860,6 +871,10 @@ async function main(): Promise<void> {\n         await dglCommand(subcommand, rest, opts);\n         break;\n \n+      case 'agent':\n+        await agentCommand(subcommand, rest, opts);\n+        break;\n+\n       case 'run':\n         switch (subcommand) {\n           case 'show':\n@@ -961,6 +976,9 @@ Commands:\n   dgl route --task-class    Recommend provider/model for task\n   dgl openapi               Run OpenAPI compatibility checks\n   dgl doctor                Show DGL operational diagnostics\n+  dgl context               Print context snapshot hash\n+  dgl economics             Print economic telemetry from latest run\n+  agent validate <file>     Validate Agent Operating Contract payload\n   run show <id>             Show a DGL run record\n   run list                  List DGL run records\n   run export --zip <path>   Export run artifacts to zip\ndiff --git a/src/dgl/index.ts b/src/dgl/index.ts\nindex 85a1b46..c55de7a 100644\n--- a/src/dgl/index.ts\n+++ b/src/dgl/index.ts\n@@ -2,14 +2,14 @@ import fs from \"fs\";\n import path from \"path\";\n import { createHash } from \"crypto\";\n import { execSync } from \"child_process\";\n-import type { DglReport, DglViolation } from \"./types.js\";\n+import type { AgentContract, DglReport, DglViolation } from \"./types.js\";\n import { diffAstExports } from \"./ast-diff.js\";\n import { diffApiContract } from \"./api-contract-diff.js\";\n import { compareOpenApi, discoverOpenApiSpecs } from \"./openapi-compat.js\";\n \n-const TRUST_BOUNDARY = [\"auth\", \"tenant\", \"secret\", \"webhook\", \"payment\", \"raw body\"];\n-const SCHEMA_VERSION = \"1.1.0\";\n-const TOOL_VERSION = \"0.4.0\";\n+const TRUST_BOUNDARY = [\"auth\", \"tenant\", \"secret\", \"webhook\", \"payment\", \"raw body\", \"billing\", \"encrypt\"];\n+const SCHEMA_VERSION = \"1.1.0\" as const;\n+const TOOL_VERSION = \"0.5.0\";\n \n function git(cmd: string): string {\n   return execSync(`git ${cmd}`, { encoding: \"utf-8\" }).trim();\n@@ -29,11 +29,41 @@ function readJson<T>(p: string, fallback: T): T {\n   return JSON.parse(fs.readFileSync(p, \"utf-8\")) as T;\n }\n \n+function sha256File(relPath: string): string {\n+  const abs = path.join(process.cwd(), relPath);\n+  if (!fs.existsSync(abs)) return \"missing\";\n+  return createHash(\"sha256\").update(fs.readFileSync(abs, \"utf-8\")).digest(\"hex\");\n+}\n+\n+export function computeContextSnapshotHash(): string {\n+  const architectureHash = sha256File(\"docs/architecture/dgl.md\");\n+  const languageHash = sha256File(\"config/canonical-language.json\");\n+  const intentHash = sha256File(\"docs/architecture/intent-manifest.json\");\n+  return createHash(\"sha256\").update([architectureHash, languageHash, intentHash].join(\"::\")).digest(\"hex\");\n+}\n+\n export function computeIntentFingerprint(manifestPath: string): string {\n   const content = fs.readFileSync(manifestPath, \"utf-8\");\n   return createHash(\"sha256\").update(content).digest(\"hex\");\n }\n \n+export function validateAgentContractPayload(payload: unknown): { ok: boolean; errors: string[] } {\n+  const p = payload as Partial<AgentContract>;\n+  const errors: string[] = [];\n+  const enumTask = [\"refactor\", \"bugfix\", \"docs\", \"security\", \"perf\", \"ui\", \"infra\"];\n+  if (!p || typeof p !== \"object\") errors.push(\"payload must be an object\");\n+  if (typeof p.provider !== \"string\" || !p.provider) errors.push(\"provider must be a non-empty string\");\n+  if (typeof p.model !== \"string\" || !p.model) errors.push(\"model must be a non-empty string\");\n+  if (typeof p.agent_id !== \"string\" || !p.agent_id) errors.push(\"agent_id must be a non-empty string\");\n+  if (!enumTask.includes(String(p.task_class))) errors.push(`task_class must be one of: ${enumTask.join(\", \")}`);\n+  if (!Array.isArray(p.changed_paths) || p.changed_paths.some((v) => typeof v !== \"string\")) errors.push(\"changed_paths must be an array of strings\");\n+  if (typeof p.risk_summary !== \"string\") errors.push(\"risk_summary must be a string\");\n+  if (typeof p.confidence !== \"number\" || p.confidence < 0 || p.confidence > 1) errors.push(\"confidence must be a number between 0 and 1\");\n+  if (!Array.isArray(p.claimed_invariants_changed) || p.claimed_invariants_changed.some((v) => typeof v !== \"string\")) errors.push(\"claimed_invariants_changed must be an array of strings\");\n+  if (typeof p.requires_acknowledgement !== \"boolean\") errors.push(\"requires_acknowledgement must be boolean\");\n+  return { ok: errors.length === 0, errors };\n+}\n+\n function semanticViolations(baseSha: string, headSha: string, filePath: string): DglViolation[] {\n   const baseText = gitShow(baseSha, filePath);\n   const headText = gitShow(headSha, filePath);\n@@ -74,6 +104,46 @@ function pruneCache(dir: string): void {\n   for (const e of sorted) fs.rmSync(e.p, { force: true });\n }\n \n+function deriveBlastRadius(files: string[]) {\n+  const subsystem = new Set(files.map((f) => f.split(\"/\")[0] ?? \"root\"));\n+  const depth = files.reduce((m, f) => Math.max(m, f.split(\"/\").length), 0);\n+  const api = files.filter((f) => f.includes(\"/api/\") || f.includes(\"openapi\")).length;\n+  const bundleSensitive = files.filter((f) => /package\\.json|tsconfig|next\\.config|webpack|vite|rollup/i.test(f)).length;\n+  const publicSurface = files.filter((f) => /(^|\\/)src\\/|(^|\\/)api\\//.test(f)).length;\n+  const score = Math.min(100, Math.round(subsystem.size * 12 + depth * 6 + api * 10 + bundleSensitive * 12 + publicSurface * 4));\n+  return {\n+    score,\n+    subsystems_touched: subsystem.size,\n+    dependency_depth_impacted: depth,\n+    public_api_surface_affected: publicSurface,\n+    openapi_endpoints_touched: api,\n+    bundle_sensitive_files_touched: bundleSensitive,\n+  };\n+}\n+\n+function perfComplexityViolations(files: string[]): DglViolation[] {\n+  const out: DglViolation[] = [];\n+  const threshold = readJson(path.join(process.cwd(), \"config\", \"dgl-performance.json\"), { nested_loop_threshold: 2, import_graph_growth_warn: 30, import_graph_growth_error: 80, cyclomatic_warn: 15, cyclomatic_error: 30 });\n+  for (const f of files.filter((x) => /\\.(ts|tsx|js|jsx|go|rs)$/.test(x) && fs.existsSync(path.join(process.cwd(), x)))) {\n+    const text = fs.readFileSync(path.join(process.cwd(), f), \"utf-8\");\n+    const nestedLoops = (text.match(/for\\s*\\(|while\\s*\\(/g) ?? []).length;\n+    const syncBlocking = /readFileSync|execSync|writeFileSync/.test(text) && f.includes(\"/api/\");\n+    const importCount = (text.match(/^\\s*import\\s+/gm) ?? []).length;\n+    if (nestedLoops > threshold.nested_loop_threshold) out.push({ type: \"performance\", severity: nestedLoops > threshold.nested_loop_threshold + 2 ? \"error\" : \"warn\", paths: [f], evidence: `Detected ${nestedLoops} loops; threshold ${threshold.nested_loop_threshold}.`, suggested_fix: \"Refactor nested loops or add indexing to reduce worst-case complexity.\", line: 1 });\n+    if (syncBlocking) out.push({ type: \"performance\", severity: \"warn\", paths: [f], evidence: \"Synchronous blocking call found in route layer.\", suggested_fix: \"Use async non-blocking IO on route-layer paths.\", line: 1 });\n+    if (importCount > threshold.import_graph_growth_error) out.push({ type: \"performance\", severity: \"error\", paths: [f], evidence: `Large import graph footprint (${importCount} imports).`, suggested_fix: \"Split module or reduce transitive import fan-out.\", line: 1 });\n+    else if (importCount > threshold.import_graph_growth_warn) out.push({ type: \"performance\", severity: \"warn\", paths: [f], evidence: `Import graph growth warning (${importCount} imports).`, suggested_fix: \"Review module boundaries for high fan-in/fan-out.\", line: 1 });\n+  }\n+  return out;\n+}\n+\n+function forecastDriftScore(providerMatrix: DglReport[\"provider_matrix\"], blastRadius: number, trustTouches: number): number {\n+  const basePrior = 0.2;\n+  if (!providerMatrix || providerMatrix.length === 0) return Math.min(1, basePrior + blastRadius / 180 + trustTouches * 0.15);\n+  const avgRevert = providerMatrix.reduce((n, r) => n + r.revert_ratio, 0) / providerMatrix.length;\n+  return Math.min(1, Math.max(0, basePrior + avgRevert * 0.6 + blastRadius / 220 + trustTouches * 0.18));\n+}\n+\n export function scanDgl(baseSha: string, headSha: string, changedOnly = true): DglReport {\n   const repo = path.basename(process.cwd());\n   const timings = { language_scan: 0, intent: 0, openapi: 0, semantic: 0, trust_boundary: 0, report_write: 0 };\n@@ -92,9 +162,10 @@ export function scanDgl(baseSha: string, headSha: string, changedOnly = true): D\n   timings.language_scan = Date.now() - langStart;\n \n   const trustStart = Date.now();\n+  const securityConfig = readJson<string[]>(path.join(process.cwd(), \"config\", \"dgl-security-boundaries.json\"), [\"auth/\", \"billing/\", \"webhook\", \"encrypt\", \"raw-body\"]);\n   for (const f of files) {\n     const lower = f.toLowerCase();\n-    if (TRUST_BOUNDARY.some((k) => lower.includes(k))) {\n+    if (TRUST_BOUNDARY.some((k) => lower.includes(k)) || securityConfig.some((k) => lower.includes(k.toLowerCase().replace(\"**\", \"\")))) {\n       violations.push({ type: \"trust_boundary\", severity: \"error\", paths: [f], evidence: \"Changed file intersects trust-boundary keyword set.\", suggested_fix: \"Add targeted tests and acknowledgement under dgl/intent-acknowledgements/.\", line: 1 });\n     }\n     if (f.includes(\"package.json\") || f.includes(\"go.mod\") || f.includes(\"Cargo.toml\")) {\n@@ -104,9 +175,8 @@ export function scanDgl(baseSha: string, headSha: string, changedOnly = true): D\n   timings.trust_boundary = Date.now() - trustStart;\n \n   const semStart = Date.now();\n-  for (const f of files) {\n-    violations.push(...semanticViolations(baseSha, headSha, f));\n-  }\n+  for (const f of files) violations.push(...semanticViolations(baseSha, headSha, f));\n+  violations.push(...perfComplexityViolations(files));\n   timings.semantic = Date.now() - semStart;\n \n   const intentStart = Date.now();\n@@ -122,6 +192,15 @@ export function scanDgl(baseSha: string, headSha: string, changedOnly = true): D\n       }\n     }\n   }\n+  const contextHash = computeContextSnapshotHash();\n+  const baselineContextPath = path.join(process.cwd(), \"dgl\", \"baselines\", \"context.hash\");\n+  const documentationTouched = files.some((f) => f.startsWith(\"docs/\"));\n+  if (fs.existsSync(baselineContextPath)) {\n+    const prior = fs.readFileSync(baselineContextPath, \"utf-8\").trim();\n+    if (prior && prior !== contextHash && !documentationTouched) {\n+      violations.push({ type: \"memory_context\", severity: \"warn\", paths: [\"docs/architecture/dgl.md\"], evidence: \"Context snapshot hash changed without documentation update.\", suggested_fix: \"Update docs or refresh dgl/baselines/context.hash intentionally.\", line: 1 });\n+    }\n+  }\n   timings.intent = Date.now() - intentStart;\n \n   const openStart = Date.now();\n@@ -134,26 +213,47 @@ export function scanDgl(baseSha: string, headSha: string, changedOnly = true): D\n   }\n   timings.openapi = Date.now() - openStart;\n \n-  const turbulence = files.slice(0, 10).map((p) => ({ path: p, reason: \"recently changed\", count: 1 }));\n+  const blast = deriveBlastRadius(files);\n+  const turbulence = files.slice(0, 30).map((p) => ({ path: p, reason: \"recently changed\", count: 1 }));\n   const bySeverity = (s: \"error\" | \"warn\") => violations.filter((v) => v.severity === s).length;\n \n+  const providerMatrixPath = path.join(process.cwd(), \"dgl\", \"reports\", \"provider-matrix.json\");\n+  const providerMatrix = readJson<DglReport[\"provider_matrix\"]>(providerMatrixPath, []);\n+  const diffStats = git(`diff --numstat ${baseSha} ${headSha}`).split(\"\\n\").filter(Boolean);\n+  const diffSize = diffStats.reduce((n, line) => {\n+    const [a, d] = line.split(\"\\t\");\n+    return n + (Number(a) || 0) + (Number(d) || 0);\n+  }, 0);\n+\n   const report: DglReport = {\n-    schema_version: \"1.0.0\",\n+    schema_version: SCHEMA_VERSION,\n     run_id: `dgl_${Date.now()}`,\n     timestamp: new Date().toISOString(),\n     repo,\n     base_sha: baseSha,\n     head_sha: headSha,\n+    context_hash: contextHash,\n+    blast_radius: blast,\n+    economics: {\n+      tokens_consumed: Number(process.env.REACH_DGL_TOKENS ?? 0),\n+      diff_size: diffSize,\n+      passes_to_converge: Number(process.env.REACH_DGL_PASSES ?? 1),\n+      repair_cycles: Number(process.env.REACH_DGL_REPAIRS ?? 0),\n+      cost_per_accepted_change: Number(process.env.REACH_DGL_COST ?? 0),\n+    },\n     summary: {\n       intent_alignment_score: Math.max(0, 100 - bySeverity(\"error\") * 20),\n       terminology_drift_score: 100,\n       semantic_drift_score: Math.max(0, 100 - violations.filter((v) => v.type === \"semantic\" || v.type === \"api_contract\").length * 10),\n       trust_boundary_change_score: Math.max(0, 100 - violations.filter((v) => v.type === \"trust_boundary\").length * 30),\n       calibration_score: 50,\n+      blast_radius_score: blast.score,\n     },\n     timings_ms: timings,\n     openapi_compat_summary: openapiSummary,\n     violations,\n+    provider_matrix: providerMatrix,\n+    drift_forecast_score: forecastDriftScore(providerMatrix, blast.score, violations.filter((v) => v.type === \"trust_boundary\").length),\n     turbulence_hotspots: turbulence,\n   };\n \n@@ -167,6 +267,9 @@ export function toMarkdown(report: DglReport): string {\n     \"\",\n     `- Base: ${report.base_sha}`,\n     `- Head: ${report.head_sha}`,\n+    `- Context Hash: ${report.context_hash ?? \"n/a\"}`,\n+    `- Blast Radius: ${report.blast_radius?.score ?? 0}`,\n+    `- Drift Forecast: ${((report.drift_forecast_score ?? 0) * 100).toFixed(1)}%`,\n     `- Intent Alignment: ${report.summary.intent_alignment_score}`,\n     `- Semantic Drift: ${report.summary.semantic_drift_score}`,\n     `- OpenAPI Breaking: ${report.openapi_compat_summary?.breaking ?? 0}`,\ndiff --git a/src/dgl/types.ts b/src/dgl/types.ts\nindex 204b1e3..ade7f32 100644\n--- a/src/dgl/types.ts\n+++ b/src/dgl/types.ts\n@@ -6,7 +6,9 @@ export type DglViolationType =\n   | \"api_contract\"\n   | \"dependency_graph\"\n   | \"memory_context\"\n-  | \"openapi\";\n+  | \"openapi\"\n+  | \"performance\"\n+  | \"agent_contract\";\n \n export interface DglViolation {\n   type: DglViolationType;\n@@ -17,20 +19,51 @@ export interface DglViolation {\n   line?: number;\n }\n \n+export interface AgentContract {\n+  provider: string;\n+  model: string;\n+  agent_id: string;\n+  task_class: \"refactor\" | \"bugfix\" | \"docs\" | \"security\" | \"perf\" | \"ui\" | \"infra\";\n+  changed_paths: string[];\n+  risk_summary: string;\n+  confidence: number;\n+  claimed_invariants_changed: string[];\n+  requires_acknowledgement: boolean;\n+  context_hash?: string;\n+}\n+\n export interface DglReport {\n-  schema_version: \"1.0.0\";\n+  schema_version: \"1.1.0\";\n   run_id: string;\n   timestamp: string;\n   repo: string;\n   base_sha: string;\n   head_sha: string;\n   provider?: { provider?: string; model?: string; agent_id?: string; context_hash?: string };\n+  context_hash?: string;\n+  blast_radius?: {\n+    score: number;\n+    subsystems_touched: number;\n+    dependency_depth_impacted: number;\n+    public_api_surface_affected: number;\n+    openapi_endpoints_touched: number;\n+    bundle_sensitive_files_touched: number;\n+  };\n+  economics?: {\n+    tokens_consumed: number;\n+    diff_size: number;\n+    passes_to_converge: number;\n+    repair_cycles: number;\n+    cost_per_accepted_change: number;\n+  };\n+  drift_forecast_score?: number;\n   summary: {\n     intent_alignment_score: number;\n     terminology_drift_score: number;\n     semantic_drift_score: number;\n     trust_boundary_change_score: number;\n     calibration_score: number;\n+    blast_radius_score?: number;\n   };\n   timings_ms?: {\n     language_scan: number;"
  },
  "changed_paths": [
    "apps/arcade/src/app/governance/dgl/page.tsx",
    "config/dgl-performance.json",
    "config/dgl-security-boundaries.json",
    "dgl/agent-contract.schema.json",
    "dgl/examples/dgl_report.generated.json",
    "dgl/examples/dgl_report.generated.md",
    "dgl/examples/supervisory-scenarios.json",
    "dgl/fixtures/agent-contract.overconfidence.json",
    "dgl/fixtures/agent-contract.valid.json",
    "dgl/report.schema.json",
    "dgl/reports/dgl_report.json",
    "dgl/reports/dgl_report.md",
    "dgl/reports/dgl_report.sarif",
    "dgl/reports/provider-matrix.json",
    "dgl/telemetry/provider-metrics.jsonl",
    "docs/architecture/dgl.md",
    "package.json",
    "scripts/dgl-gate.ts",
    "src/cli/reach-cli.ts",
    "src/dgl/index.ts",
    "src/dgl/types.ts"
  ],
  "metadata": {
    "confidence": 0.75,
    "risk_summary": "Generated from git diff.",
    "context_hash": "1676c961690f0f72bbabd1785f652c1fd46e94c8555bfb63574dcbeeee7baf55",
    "claimed_invariants_changed": [],
    "requires_acknowledgement": false
  },
  "artifacts": {}
}